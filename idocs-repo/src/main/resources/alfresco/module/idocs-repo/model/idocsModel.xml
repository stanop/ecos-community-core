<?xml version='1.0' encoding='UTF-8'?>

<model name="idocs:idocsModel" xmlns="http://www.alfresco.org/model/dictionary/1.0">

    <description>iDocs DMS</description>
    <author>Citeck</author>
    <version>1.0</version>

    <imports>
        <import uri="http://www.alfresco.org/model/dictionary/1.0" prefix="d" />
        <import uri="http://www.alfresco.org/model/content/1.0" prefix="cm" />
        <import uri="http://www.alfresco.org/model/datalist/1.0" prefix="dl" />
        <import uri="http://www.citeck.ru/model/content/dms/1.0" prefix="dms" />
        <import uri="http://www.citeck.ru/model/content/classification/tk/1.0" prefix="tk" />
        <import uri="http://www.citeck.ru/model/history/1.0" prefix="history" />
        <import uri="http://www.citeck.ru/model/icase/1.0" prefix="icase" />
    </imports>

    <namespaces>
        <namespace uri="http://www.citeck.ru/model/content/idocs/1.0" prefix="idocs" />
        <namespace uri="http://www.citeck.ru/model/budget/1.0" prefix="budget" />
    </namespaces>

    <constraints>
        <constraint name="idocs:constraint:documentStatus" type="LIST">
            <parameter name="allowedValues">
                <list>
                    <value>new</value>
                    <value>project</value>
                    <value>onApproval</value>
                    <value>onCorrection</value>
                    <value>approved</value>
                    <value>confirmed</value>
                    <value>onNormcontrol</value>
                    <value>onConfirm</value>
                    <value>canceled</value>
                    <value>normcontroled</value>
                    <value>onSign</value>
                    <value>signed</value>
                    <value>registered</value>
                    <value>onPerformance</value>
                    <value>performed</value>
                    <value>onConsideration</value>
                    <value>onResolution</value>
                    <value>archive</value>
                    <value>paid</value>
                    <value>transferredToAccountant</value>

                    <!--<value>creation</value>-->
                    <value>onRegistration</value>
                    <value>approvedWithComment</value>
                    <!--<value>onControl</value>-->
                    <!--<value>overdue</value>-->
                    <!--<value>sent</value>-->
                    <value>completed</value>
                    <value>active</value>
                    <value>rescinded</value>
                    <value>notActive</value>
                    
                    <!-- contracts statuses-->
                    <value>draft</value> <!-- Черновик -->
                    <value>forPayment</value> <!-- На оплате -->
                    
                    <value>onFamiliarization</value>
                    <value>familiarized</value>
                    <value>conducted</value>
                    <value>closed</value>
                    
                    <value>purchase-project</value>
                    <value>purchase-on-approval</value>
                    <value>purchase-on-signing</value>
                    <value>purchase-on-correction</value>
                    <value>bids-project</value>
                    <value>bids-on-approval</value>
                    <value>bids-on-signing</value>
                    <value>bids-on-correction</value>
                    <value>additional-bids-on-approval</value>
                    <value>additional-bids-on-signing</value>
                    <value>additional-bids-on-correction</value>
                    <value>purchase-signed</value>
                </list>
            </parameter>
        </constraint>

        <constraint name="idocs:constraint:allowedPriority" type="LIST">
            <parameter name="allowedValues">
                <list>
                    <value>1</value>
                    <value>2</value>
                </list>
            </parameter>
        </constraint>

        <constraint name="idocs:constraint:contractorType" type="LIST">
            <parameter name="allowedValues">
                <list>
                    <value>customer</value>
                    <value>vendor</value>
                    <value>employee</value>
                </list>
            </parameter>
        </constraint>

        <constraint name="idocs:constraint:attachmentStateOptions" type="LIST">
            <parameter name="allowedValues">
                <list>
                    <value>REPEAL_BY_COUNTERPARTY_REQUESTED</value>
                    <value>REPEALED_BY_COUNTERPARTY</value>
                    <value>CLARIFICATION_REQUESTED</value>
                    <value>SIGN_REQUIRED</value>
                    <value>RECEIVED</value>
                    <value>SIGNED</value>
                    <value>COUNTERPARTY_SIGNED</value>
                    <value>COUNTERPARTY_SIGN_REQUESTED</value>
                    <value>DELIVERY_FAILED</value>
                    <value>REQUESTS_MY_REVOCATION</value>
                    <value>REVOCATION_IS_REQUESTED_BY_ME</value>
                    <value>REVOCATION_ACCEPTED</value>
                    <value>REVOCATION_REJECTED</value>
                    <value>REJECTION_SENT</value>
                    <value>REJECTED</value>
                    <value>REVISIONED</value>
                    <value>CORRECTED</value>
                    <value>REVISION_CORRECTED</value>
                    <value/>
                </list>
            </parameter>
        </constraint>

    </constraints>

    <types>

        <!-- Demo -->
        <type name="idocs:activityDirection">
            <parent>idocs:doc</parent>
            <properties>
                <property name="idocs:activityDirectionCode">
                    <title>Код</title>
                    <type>d:text</type>
                </property>
                <property name="idocs:activityDirectionName">
                    <title>Направление Деятельности</title>
                    <type>d:text</type>
                </property>
            </properties>
        </type>

        <!-- Abstract -->
        <type name="idocs:doc">
            <parent>dms:doc</parent>
            <properties>
                <property name="idocs:caseCompleted">
                    <type>d:boolean</type>
                    <default>false</default>
                </property>
                <property name="idocs:caseModelsSent">
                    <type>d:boolean</type>
                    <default>false</default>
                </property>
                <property name="idocs:useNewHistory">
                    <type>d:boolean</type>
                </property>
            </properties>
            <mandatory-aspects>
                <aspect>idocs:hasLegalEntity</aspect>
                <aspect>idocs:registrationInfo</aspect>
                <aspect>idocs:pagesInfo</aspect>
                <aspect>idocs:hasSummary</aspect>
                <aspect>idocs:hasController</aspect>
                <aspect>idocs:hasNote</aspect>
                <aspect>idocs:lifeCycle</aspect>
                <aspect>tk:documentTypeKind</aspect>
                <aspect>history:historical</aspect>
            </mandatory-aspects>
        </type>

        <type name="idocs:powerOfAttorney">
            <parent>idocs:doc</parent>
            <properties>
                <property name="idocs:subjectAttorney">
                    <title>Subject Attorney</title>
                    <type>d:text</type>
                </property>
                <property name="idocs:dateAttorney">
                    <title>Date Attorney</title>
                    <type>d:date</type>
                </property>
            </properties>
            <associations>
                <association name="idocs:issued">
                    <source>
                        <mandatory>false</mandatory>
                        <many>true</many>
                    </source>
                    <target>
                        <class>cm:person</class>
                        <mandatory>false</mandatory>
                        <many>false</many>
                    </target>
                </association>
                <association name="idocs:whoIssued">
                    <source>
                        <mandatory>false</mandatory>
                        <many>true</many>
                    </source>
                    <target>
                        <class>cm:person</class>
                        <mandatory>false</mandatory>
                        <many>false</many>
                    </target>
                </association>
                <association name="idocs:issueInitiator">
                    <source>
                        <mandatory>false</mandatory>
                        <many>true</many>
                    </source>
                    <target>
                        <class>cm:person</class>
                        <mandatory>false</mandatory>
                        <many>false</many>
                    </target>
                </association>
            </associations>
            <mandatory-aspects>
                <aspect>idocs:hasDuration</aspect>
            </mandatory-aspects>
        </type>

        <!-- Catalogs -->

        <type name="idocs:legalEntity">
            <title>Юридическое лицо</title>
            <parent>idocs:entity</parent>
            <properties>
                <!--property name="idocs:juridicalAddress">
                    <title>Juridical address</title>
                    <type>d:text</type>
                    <mandatory>true</mandatory>
                </property>
                <property name="idocs:postAddress">
                    <title>Post address</title>
                    <type>d:text</type>
                    <mandatory>true</mandatory>
                </property>

                <property name="idocs:code">
                    <title>Код юридического лица</title>
                    <type>d:text</type>
                    <mandatory>false</mandatory>
                </property>
                <property name="idocs:phoneNumber">
                    <title>Телефон</title>
                    <type>d:text</type>
                    <mandatory>false</mandatory>
                </property-->
            </properties>
            <!--<overrides>-->
                <!--<property name="dms:INN">-->
                    <!--<mandatory>true</mandatory>-->
                <!--</property>-->
                <!--<property name="dms:KPP">-->
                    <!--<mandatory>true</mandatory>-->
                <!--</property>-->
            <!--</overrides>-->
            <associations>
                <!--association name="idocs:generalDirector">
                    <title>Генеральный директор</title>
                    <source>
                        <mandatory>false</mandatory>
                        <many>true</many>
                    </source>
                    <target>
                        <class>cm:person</class>
                        <mandatory>false</mandatory>
                        <many>false</many>
                    </target>
                </association>
                <association name="idocs:accountantGeneral">
                    <title>Главный бухгалтер</title>
                    <source>
                        <mandatory>false</mandatory>
                        <many>true</many>
                    </source>
                    <target>
                        <class>cm:person</class>
                        <mandatory>false</mandatory>
                        <many>false</many>
                    </target>
                </association-->
            </associations>
            <mandatory-aspects>
                <aspect>idocs:organizationInfo</aspect>
                <aspect>idocs:publicRegInfo</aspect>
                <aspect>idocs:entityInfo</aspect>
                <aspect>idocs:hasLegalForm</aspect>
            </mandatory-aspects>
        </type>
        
        <type name="idocs:contractor">
            <parent>idocs:abstractContractor</parent>
            <properties>
                <property name="idocs:CEOname">
                    <title>CEO name</title>
                    <type>d:text</type>
                    <mandatory>true</mandatory>
                </property>
                <property name="idocs:contractorID">
                    <title>ID</title>
                    <type>d:int</type>
                </property>
            </properties>
            <associations>
                <association name="idocs:contacts">
                    <source>
                        <mandatory>false</mandatory>
                        <many>false</many>
                    </source>
                    <target>
                        <class>idocs:contact</class>
                        <mandatory>false</mandatory>
                        <many>true</many>
                    </target>
                </association>
            </associations>
            <mandatory-aspects>
                <aspect>idocs:organizationInfo</aspect>
                <aspect>idocs:publicRegInfo</aspect>
                <aspect>idocs:entityInfo</aspect>
                <aspect>idocs:communicationInfo</aspect>
                <aspect>idocs:diadocInfo</aspect>
                <aspect>idocs:contractorType</aspect>
                <aspect>idocs:hasBankAccount</aspect>
            </mandatory-aspects>
        </type>

        <type name="idocs:contact">
            <parent>dl:dataListItem</parent>
            <properties>
                <property name="idocs:firstName">
                    <type>d:text</type>
                    <mandatory>true</mandatory>
                </property>
                <property name="idocs:lastName">
                    <type>d:text</type>
                    <mandatory>true</mandatory>
                </property>
                <property name="idocs:patronymicName">
                    <type>d:text</type>
                    <mandatory>true</mandatory>
                </property>
                <property name="idocs:position">
                    <type>d:text</type>
                    <mandatory>true</mandatory>
                </property>
            </properties>
            <mandatory-aspects>
                <aspect>idocs:communicationInfo</aspect>
                <aspect>idocs:organizationInfo</aspect>
            </mandatory-aspects>
        </type>
        
        <type name="idocs:filesNomenclature">
            <parent>dl:dataListItem</parent>
            <properties>
                <property name="idocs:fileIndex">
                    <type>d:text</type>
                    <mandatory>true</mandatory>
                </property>
                <property name="idocs:fileName">
                    <type>d:text</type>
                    <mandatory>true</mandatory>
                </property>
                <property name="idocs:fileYear">
                    <type>d:text</type>
                </property>
                <property name="idocs:clauseNumber">
                    <type>d:text</type>
                </property>
            </properties>
        </type>

        <type name="budget:item">
        	<title>Статья бюджета</title>
            <parent>dl:dataListItem</parent>
            <properties>
                <property name="budget:itemCode">
                    <title>Код статьи бюджета</title>
                    <type>d:text</type>
                    <mandatory>true</mandatory>
                </property>
                <property name="budget:itemName">
                    <title>Наименование статьи бюджета</title>
                    <type>d:text</type>
                    <mandatory>true</mandatory>
                </property>
            </properties>
        </type>
        
        <type name="idocs:currency">
        	<title>Валюта</title>
            <parent>dl:dataListItem</parent>
            <properties>
                <property name="idocs:currencyCode">
                    <title>Код валюты</title>
                    <type>d:text</type>
                    <mandatory>true</mandatory>
                </property>
                <property name="idocs:currencyName">
                    <title>Название</title>
                    <type>d:text</type>
                    <mandatory>true</mandatory>
                </property>
                <property name="idocs:currencyRate">
                    <title>Курс валюты</title>
                    <type>d:double</type>
                </property>
                <property name="idocs:currencyNameRu">
                    <type>d:text</type>
                </property>
                <property name="idocs:currencyCatalogCode">
                    <type>d:text</type>
                </property>
            </properties>
        </type>

        <type name="idocs:currencyRateRecord">
            <title>Курс валюты</title>
            <parent>dl:dataListItem</parent>
            <properties>
                <property name="idocs:crrValue">
                    <title>Курс</title>
                    <type>d:double</type>
                </property>
                <property name="idocs:crrDate">
                    <title>Дата</title>
                    <type>d:date</type>
                </property>
                <property name="idocs:crrSyncDate">
                    <title>sync date</title>
                    <type>d:text</type>
                </property>
            </properties>
            <associations>
                <association name="idocs:crrBaseCurrency">
                    <title>Базовая валюта</title>
                    <source>
                        <mandatory>false</mandatory>
                        <many>true</many>
                    </source>
                    <target>
                        <class>idocs:currency</class>
                        <mandatory>false</mandatory>
                        <many>false</many>
                    </target>
                </association>
                <association name="idocs:crrTargetCurrency">
                    <title>Конвертируемая валюта</title>
                    <source>
                        <mandatory>false</mandatory>
                        <many>true</many>
                    </source>
                    <target>
                        <class>idocs:currency</class>
                        <mandatory>false</mandatory>
                        <many>false</many>
                    </target>
                </association>
            </associations>
        </type>

        <type name="idocs:currencyRatesXML">
            <parent>cm:content</parent>
        </type>
        
        <type name="idocs:bankAccount">
        	<title>Банковский счет</title>
            <parent>dl:dataListItem</parent>
            <mandatory-aspects>
            	<aspect>idocs:hasLegalEntity</aspect>
                <aspect>idocs:hasBankAccount</aspect>
            </mandatory-aspects>
        </type>
		
        <type name="idocs:entity">
            <title>Entity</title>
            <parent>dl:dataListItem</parent>
        </type>

        <type name="idocs:addressByParts">
            <title>Address by parts</title>
            <parent>dl:dataListItem</parent>
            <properties>
                <property name="idocs:countryName">
                    <title>Country</title>
                    <type>d:text</type>
                    <mandatory>false</mandatory>
                </property>
                <property name="idocs:postCode">
                    <title>PostCode</title>
                    <type>d:text</type>
                    <mandatory>false</mandatory>
                </property>
                <property name="idocs:regionName">
                    <title>Region</title>
                    <type>d:text</type>
                    <mandatory>false</mandatory>
                </property>
                <property name="idocs:districtName">
                    <title>District</title>
                    <type>d:text</type>
                    <mandatory>false</mandatory>
                </property>
                <property name="idocs:cityName">
                    <title>City</title>
                    <type>d:text</type>
                    <mandatory>true</mandatory>
                </property>
                <property name="idocs:streetName">
                    <title>Street</title>
                    <type>d:text</type>
                    <mandatory>true</mandatory>
                </property>
                <property name="idocs:house">
                    <title>House</title>
                    <type>d:text</type>
                    <mandatory>true</mandatory>
                </property>
                <property name="idocs:addressExtraInfo">
                    <title>Extra info</title>
                    <type>d:text</type>
                    <mandatory>false</mandatory>
                </property>
            </properties>
        </type>

        <type name="idocs:legalForm">
            <title>Организационно-правовая форма</title>
            <parent>dl:dataListItem</parent>
            <properties>
                <property name="idocs:legalFormName">
                    <title>Наименование организационно-правовой формы контрагента</title>
                    <type>d:text</type>
                </property>
                <property name="idocs:legalFormDescription">
                    <title>Описание организационно-правовой формы контрагента</title>
                    <type>d:text</type>
                </property>
            </properties>
        </type>

        <type name="idocs:abstractAttorney">
            <title>Абстрактный тип поверенного</title>
            <description>Данный тип наследуют все поверенные</description>
            <parent>dl:dataListItem</parent>
        </type>

        <type name="idocs:personAttorney">
            <title>Поверенное лицо</title>
            <parent>idocs:abstractAttorney</parent>
            <properties>
                <property name="idocs:numberPass">
                    <title>Номер паспорта</title>
                    <type>d:text</type>
                </property>
                <property name="idocs:whoIssuedPass">
                    <title>Кем выдан паспорт</title>
                    <type>d:text</type>
                </property>
                <property name="idocs:passIssueDate">
                    <title>Дата выдачи паспорта</title>
                    <type>d:date</type>
                </property>
            </properties>
            <associations>
                <association name="idocs:personFullName">
                    <title>ФИО</title>
                    <source>
                        <mandatory>false</mandatory>
                        <many>true</many>
                    </source>
                    <target>
                        <class>cm:person</class>
                        <mandatory>false</mandatory>
                        <many>false</many>
                    </target>
                </association>
            </associations>
        </type>

        <type name="idocs:abstractOrganizationAttorney">
            <title>Абстрактная поверенная организация</title>
            <parent>idocs:abstractAttorney</parent>
            <properties>
                <property name="idocs:organizationAddress">
                    <title>Organization Address</title>
                    <type>d:text</type>
                </property>
                <property name="idocs:organizationInn">
                    <title>INN</title>
                    <type>d:text</type>
                </property>
            </properties>
            <mandatory-aspects>
                <aspect>idocs:hasLegalForm</aspect>
            </mandatory-aspects>
        </type>

        <type name="idocs:countryISO3166">
            <title>ISO 3166 Codes</title>
            <parent>dl:dataListItem</parent>
            <properties>
                <property name="idocs:countryISO3166Alpha2">
                    <title>Alpha 2</title>
                    <type>d:text</type>
                </property>
                <property name="idocs:countryISO3166Alpha3">
                    <title>Alpha 3</title>
                    <type>d:text</type>
                </property>
                <property name="idocs:countryISO3166Number">
                    <title>Number</title>
                    <type>d:text</type>
                </property>
            </properties>
        </type>

        <type name="idocs:abstractContractor">
            <title>Entity</title>
            <parent>idocs:entity</parent>
        </type>

        <type name="idocs:documentFinalStatus">
            <title>Document final status</title>
            <parent>dl:dataListItem</parent>
            <properties>
                <property name="idocs:documentType">
                    <title>Document type</title>
                    <type>d:qname</type>
                </property>
            </properties>
            <associations>
                <association name="idocs:finalStatuses">
                    <title>Final statuses</title>
                    <source>
                        <mandatory>false</mandatory>
                        <many>true</many>
                    </source>
                    <target>
                        <class>icase:caseStatus</class>
                        <mandatory>false</mandatory>
                        <many>true</many>
                    </target>
                </association>
            </associations>
        </type>

    </types>

    <aspects>

        <aspect name="idocs:hasLegalEntity">
            <associations>
                <association name="idocs:legalEntity">
                    <source>
                        <mandatory>false</mandatory>
                        <many>true</many>
                    </source>
                    <target>
                        <class>idocs:legalEntity</class>
                        <mandatory>false</mandatory>
                        <many>false</many>
                    </target>
                </association>
            </associations>
        </aspect>

        <aspect name="idocs:registrationInfo">
            <properties>
                <property name="idocs:registrationNumber">
                    <title>Registration number</title>
                    <type>d:text</type>
                </property>
                <property name="idocs:registrationDate">
                    <title>Date of registration</title>
                    <type>d:date</type>
                </property>
            </properties>
        </aspect>
        
        <aspect name="idocs:publicRegInfo">
            <title>Регистрационная информация юридического лица</title>
            <properties>
                <property name="idocs:okpo">
                    <title>ОКПО</title>
                    <type>d:text</type>
                    <mandatory>false</mandatory>
                </property>
                <property name="idocs:ogrn">
                    <title>ОГРН</title>
                    <type>d:text</type>
                    <mandatory>false</mandatory>
                </property>
                <property name="idocs:inn">
                    <title>ИНН</title>
                    <type>d:text</type>
                    <mandatory>false</mandatory>
                </property>
                <property name="idocs:kpp">
                    <title>КПП</title>
                    <type>d:text</type>
                    <mandatory>false</mandatory>
                </property>
                <property name="idocs:bill">
                    <title>Bill</title>
                    <type>d:text</type>
                    <mandatory>false</mandatory>
                </property>
            </properties>
        </aspect>

        <aspect name="idocs:hasLegalForm">
            <associations>
                <association name="idocs:legalForm">
                    <title>Legal Form</title>
                    <source>
                        <mandatory>false</mandatory>
                        <many>true</many>
                    </source>
                    <target>
                        <class>idocs:legalForm</class>
                        <mandatory>false</mandatory>
                        <many>false</many>
                    </target>
                </association>
            </associations>
        </aspect>
        
        <!-- DEPRECATED -->
        <aspect name="idocs:hasDocumentType">
            <associations>
                <association name="idocs:documentType">
                    <source>
                        <mandatory>false</mandatory>
                        <many>true</many>
                    </source>
                    <target>
                        <class>tk:documentTypeKind</class>
                        <mandatory>true</mandatory>
                        <many>false</many>
                    </target>
                </association>
            </associations>
        </aspect>

        <aspect name="idocs:hasSignatory">
            <associations>
                <association name="idocs:signatory">
                    <source>
                        <mandatory>false</mandatory>
                        <many>true</many>
                    </source>
                    <target>
                        <class>cm:person</class>
                        <mandatory>false</mandatory>
                        <many>false</many>
                    </target>
                </association>
            </associations>
        </aspect>
        
        <aspect name="idocs:pagesInfo">
            <properties>
                <property name="idocs:pagesNumber">
                    <title>Number of pages</title>
                    <type>d:int</type>
                </property>
                <property name="idocs:appendixPagesNumber">
                    <title>Number of appendix pages</title>
                    <type>d:int</type>
                </property>
            </properties>
        </aspect>

        <aspect name="idocs:hasSummary">
            <properties>
                <property name="idocs:summary">
                    <title>Summary</title>
                    <type>d:text</type>
                </property>
            </properties>
        </aspect>

        <aspect name="idocs:hasController">
            <associations>
                <association name="idocs:controller">
                    <source>
                        <mandatory>false</mandatory>
                        <many>true</many>
                    </source>
                    <target>
                        <class>cm:person</class>
                        <mandatory>false</mandatory>
                        <many>false</many>
                    </target>
                </association>
            </associations>
        </aspect>

        <aspect name="idocs:hasNote">
            <properties>
                <property name="idocs:note">
                    <title>Note</title>
                    <type>d:text</type>
                </property>
            </properties>
        </aspect>

        <aspect name="idocs:hasPerformer">
        <associations>
            <association name="idocs:performer">
                <source>
                    <mandatory>false</mandatory>
                    <many>true</many>
                </source>
                <target>
                    <class>cm:person</class>
                    <mandatory>false</mandatory>
                    <many>false</many>
                </target>
            </association>
        </associations>
    </aspect>

        <aspect name="idocs:hasSupervisor">
            <associations>
                <association name="idocs:supervisor">
                    <source>
                        <mandatory>false</mandatory>
                        <many>true</many>
                    </source>
                    <target>
                        <class>cm:person</class>
                        <mandatory>false</mandatory>
                        <many>false</many>
                    </target>
                </association>
            </associations>
        </aspect>

        <aspect name="idocs:hasDocumentStatus">
            <properties>
                <property name="idocs:documentStatus">
                    <title>Document status</title>
                    <type>d:text</type>
                    <default>new</default>
                </property>
            </properties>
        </aspect>

        <aspect name="idocs:hasRestrictedDocumentStatus">
            <parent>idocs:hasDocumentStatus</parent>
            <overrides>
                <property name="idocs:documentStatus">
                    <constraints>
                        <constraint ref="idocs:constraint:documentStatus"/>
                    </constraints>
                </property>
            </overrides>
        </aspect>
        
        <aspect name="idocs:hasDuration">
            <properties>
                <property name="idocs:duration">
                    <title>Duration</title>
                    <type>d:text</type>
                </property>
            </properties>
        </aspect>

        <aspect name="idocs:organizationInfo">
            <properties>
                <property name="idocs:fullOrganizationName">
                    <title>Full name of organization</title>
                    <type>d:text</type>
                    <mandatory>true</mandatory>
                </property>
                <property name="idocs:shortOrganizationName">
                    <title>Alternative name of organization</title>
                    <type>d:text</type>
                    <mandatory>false</mandatory>
                </property>
                <property name="idocs:engOrganizationName">
                    <title>Organization name in English</title>
                    <type>d:text</type>
                </property>
            </properties>
        </aspect>
        
        <aspect name="idocs:communicationInfo">
            <properties>
                <property name="idocs:phone">
                    <title>Phone</title>
                    <type>d:text</type>
                    <mandatory>false</mandatory>
                </property>
                <property name="idocs:fax">
                    <title>Fax</title>
                    <type>d:text</type>
                    <mandatory>false</mandatory>
                </property>
                <property name="idocs:email">
                    <title>Email address</title>
                    <type>d:text</type>
                    <mandatory>false</mandatory>
                    <constraints>
                        <constraint ref="dms:constraint:mail" />
                    </constraints>
                </property>
            </properties>
        </aspect>

        <aspect name="idocs:diadocInfo">
            <properties>
                <property name="idocs:diadocBoxId">
                    <title>Diadoc Box Id</title>
                    <type>d:text</type>
                    <mandatory>false</mandatory>
                </property>
            </properties>
        </aspect>

        <aspect name="idocs:hasRegistrator">
            <associations>
                <association name="idocs:registrator">
                    <title>Регистратор</title>
                    <source>
                        <mandatory>false</mandatory>
                        <many>true</many>
                    </source>
                    <target>
                        <class>cm:person</class>
                        <mandatory>false</mandatory>
                        <many>false</many>
                    </target>
                </association>
            </associations>
        </aspect>

        <aspect name="idocs:lifeCycle" />

        <aspect name="idocs:hasInitiator">
            <title>Инициатор</title>
            <associations>
                <association name="idocs:initiator">
                    <source>
                        <mandatory>false</mandatory>
                        <many>true</many>
                    </source>
                    <target>
                        <class>cm:person</class>
                        <mandatory>false</mandatory>
                        <many>false</many>
                    </target>
                </association>
            </associations>
        </aspect>

        <aspect name="idocs:hasFailureCause">
            <properties>
                <property name="idocs:failureCause">
                    <title>Причина отказа</title>
                    <type>d:text</type>
                </property>
            </properties>
        </aspect>
        
        <aspect name="idocs:shortName">
            <title>Краткое название</title>
            <properties>
                <property name="idocs:shortName">
                    <title>Краткое название</title>
                    <type>d:text</type>
                    <mandatory>false</mandatory>
                </property>
            </properties>
        </aspect>

        <aspect name="idocs:deFactoAddress">
            <title>Фактический адрес</title>
            <properties>
                <property name="idocs:deFactoAddress">
                    <title>Фактический адрес</title>
                    <type>d:text</type>
                </property>
            </properties>
        </aspect>

        <aspect name="idocs:webSiteURL">
            <title>Адрес сайта</title>
            <properties>
                <property name="idocs:webSiteURL">
                    <title>Адрес сайта</title>
                    <type>d:text</type>
                </property>
            </properties>
        </aspect>

        <aspect name="idocs:facsimile">
            <title>Факсимиле</title>
            <associations>
                <association name="idocs:signFacsimile">
                    <title>Факсимиле подписи</title>
                    <source>
                        <mandatory>false</mandatory>
                        <many>false</many>
                    </source>
                    <target>
                        <class>cm:content</class>
                        <mandatory>false</mandatory>
                        <many>false</many>
                    </target>
                </association>
            </associations>
        </aspect>

        <aspect name="idocs:applicability">
            <title>Applicability</title>
            <properties>
                <property name="idocs:applicability">
                    <title>Applicability</title>
                    <type>d:boolean</type>
                </property>
            </properties>
        </aspect>

        <aspect name="idocs:entityInfo">
            <title>Entity info</title>
            <properties>
                <property name="idocs:juridicalAddress">
                    <title>Juridical address</title>
                    <type>d:text</type>
                    <mandatory>true</mandatory>
                </property>
                <property name="idocs:postAddress">
                    <title>Post address</title>
                    <type>d:text</type>
                    <mandatory>true</mandatory>
                </property>

                <property name="idocs:code">
                    <title>Код юридического лица</title>
                    <type>d:text</type>
                    <mandatory>false</mandatory>
                </property>
                <property name="idocs:phoneNumber">
                    <title>Телефон</title>
                    <type>d:text</type>
                    <mandatory>false</mandatory>
                </property>
            </properties>
            <associations>
                <association name="idocs:generalDirector">
                    <title>Генеральный директор</title>
                    <source>
                        <mandatory>false</mandatory>
                        <many>true</many>
                    </source>
                    <target>
                        <class>cm:person</class>
                        <mandatory>false</mandatory>
                        <many>false</many>
                    </target>
                </association>
                <association name="idocs:accountantGeneral">
                    <title>Главный бухгалтер</title>
                    <source>
                        <mandatory>false</mandatory>
                        <many>true</many>
                    </source>
                    <target>
                        <class>cm:person</class>
                        <mandatory>false</mandatory>
                        <many>false</many>
                    </target>
                </association>
            </associations>
        </aspect>
        
        <aspect name="idocs:hasManager">
            <properties>
                <property name="idocs:managerGroup">
                    <title>Duration</title>
                    <type>d:text</type>
                </property>
                <property name="idocs:managerPermission">
                    <title>Duration</title>
                    <type>d:text</type>
                </property>
            </properties>
        </aspect>

        <aspect name="idocs:declension">
            <title>Declension</title>
            <properties>
                <property name="idocs:nameInGenitiveCase">
                    <title>Name in genitive case</title>
                    <type>d:text</type>
                    <mandatory>false</mandatory>
                </property>
                <property name="idocs:nameInAccusativeCase">
                    <title>Name in accusative case</title>
                    <type>d:text</type>
                    <mandatory>false</mandatory>
                </property>
                <property name="idocs:nameInDativeCase">
                    <title>Name in dative case</title>
                    <type>d:text</type>
                    <mandatory>false</mandatory>
                </property>
            </properties>
        </aspect>
        <!-- Срок выполнения бизнес-процесса-->
        <aspect name="idocs:dateConfirmDueDate">
            <properties>
                <property name="idocs:dateConfirmDueDate">
                    <title>Срок согласования</title>
                    <type>d:date</type>
                </property>
            </properties>
        </aspect>

        <!-- Приоритет -->
        <aspect name="idocs:priorityConfirm">
            <properties>
                <property name="idocs:priorityConfirm">
                    <title>Приоритет</title>
                    <type>d:int</type>
                    <constraints>
                        <constraint ref="idocs:constraint:allowedPriority" />
                    </constraints>
                </property>
            </properties>
        </aspect>


        <aspect name="idocs:confirmers">
            <properties>
                <!-- precedence of confirmers -->
                <property name="idocs:precedence">
                    <type>d:text</type>
                </property>
            </properties>
            <associations>
                <!-- confirmers -->
                <association name="idocs:confirmers">
                    <source>
                        <mandatory>false</mandatory>
                        <many>true</many>
                    </source>
                    <target>
                        <class>cm:authority</class>
                        <mandatory>false</mandatory>
                        <many>true</many>
                    </target>
                </association>
            </associations>
        </aspect>
		
		<aspect name="idocs:hasSignedVersion">
			<associations>
				<child-association name="idocs:signedVersion">
					<title>Подписанная версия</title>
					<source>
						<mandatory>false</mandatory>
						<many>false</many>
					</source>
					<target>
						<class>cm:content</class>
						<mandatory>false</mandatory>
						<many>false</many>
					</target>
				</child-association>
			</associations>
		</aspect>

        <aspect name="idocs:hasContractor">
            <associations>
                <association name="idocs:contractor">
                    <source>
                        <mandatory>false</mandatory>
                        <many>true</many>
                    </source>
                    <target>
                        <class>idocs:contractor</class>
                        <mandatory>false</mandatory>
                        <many>false</many>
                    </target>
                </association>
            </associations>
        </aspect>

        <aspect name="idocs:hasCurrency">
            <associations>
                <association name="idocs:currencyDocument">
                    <title>Currency</title>
                    <source>
                        <mandatory>false</mandatory>
                        <many>true</many>
                    </source>
                    <target>
                        <class>idocs:currency</class>
                        <mandatory>false</mandatory>
                        <many>false</many>
                    </target>
                </association>
            </associations>
        </aspect>

        <!-- Требуется утверждение у контрагента -->
        <aspect name="idocs:hasContractorApproval">
            <properties>
                <property name="idocs:hasContractorApproval">
                    <type>d:boolean</type>
                    <default>true</default>
                </property>
            </properties>
        </aspect>

        <aspect name="idocs:currencyShortName">
            <properties>
                <property name="idocs:currencyShortName">
                    <title>Сокращенное название валюты(символ)</title>
                    <type>d:text</type>
                </property>
            </properties>
        </aspect>

        <aspect name="idocs:currencyNumberCode">
            <properties>
                <property name="idocs:currencyNumberCode">
                    <title>Цифровой код валюты</title>
                    <type>d:int</type>
                </property>
            </properties>
        </aspect>

        <aspect name="idocs:hasAttorneys">
            <associations>
                <association name="idocs:docAttorneys">
                    <source>
                        <mandatory>false</mandatory>
                        <many>true</many>
                    </source>
                    <target>
                        <class>idocs:abstractAttorney</class>
                        <mandatory>false</mandatory>
                        <many>true</many>
                    </target>
                </association>
            </associations>
        </aspect>

        <aspect name="idocs:hasArchiveDate">
            <properties>
                <property name="idocs:archiveDate">
                    <type>d:date</type>
                </property>
            </properties>
        </aspect>

        <aspect name="idocs:contractorType">
            <title>Contractor type</title>
            <properties>
                <property name="idocs:contractorType">
                    <title>Contractor type</title>
                    <type>d:text</type>
                    <!-- <default>customer</default> -->
                    <multiple>true</multiple>
                    <constraints>
                        <constraint ref="idocs:constraint:contractorType" />
                    </constraints>
                </property>
            </properties>
        </aspect>

        <aspect name="idocs:hasBankAccount">
            <title>Банковский счет</title>
            <properties>
                <property name="idocs:bankTitle">
                    <title>Название банка</title>
                    <type>d:text</type>
                    <mandatory>true</mandatory>
                </property>
                <property name="idocs:bankTitleEng">
                    <title>Название банка на английском языке</title>
                    <type>d:text</type>
                </property>
                <property name="idocs:bankId">
                    <title>БИК</title>
                    <type>d:text</type>
                    <mandatory>true</mandatory>
                </property>
                <property name="idocs:accountNumber">
                    <title>Счет</title>
                    <type>d:text</type>
                    <mandatory>true</mandatory>
                </property>
                <property name="idocs:corresponentBankTitle">
                    <title>Название банка-корреспондента</title>
                    <type>d:text</type>
                </property>
                <property name="idocs:correspondentBankId">
                    <title>БИК банка-корреспондента</title>
                    <type>d:text</type>
                </property>
                <property name="idocs:corresponentAccountNumber">
                    <title>Счет в банке-корреспонденте</title>
                    <type>d:text</type>
                </property>
                <property name="idocs:swift">
                    <title>SWIFT</title>
                    <type>d:text</type>
                </property>
                <property name="idocs:currencyEnabled">
                    <title>Использовать счет как валютный</title>
                    <type>d:boolean</type>
                    <default>false</default>
                </property>
            </properties>
        </aspect>

        <aspect name="idocs:hasSignRequired">
            <properties>
                <property name="idocs:signOurRequired">
                    <type>d:boolean</type>
                </property>
                <property name="idocs:signCARequired">
                    <type>d:boolean</type>
                </property>
            </properties>
        </aspect>

        <aspect name="idocs:hasTotalAndVAT">
            <properties>
                <property name="idocs:totalSum">
                    <title>Invoice total sum</title>
                    <type>d:double</type>
                    <mandatory>false</mandatory>
                </property>
                <property name="idocs:vatPart">
                    <title>Invoice VAT</title>
                    <type>d:double</type>
                    <mandatory>false</mandatory>
                </property>
            </properties>
        </aspect>

        <aspect name="idocs:hasComment">
            <properties>
                <property name="idocs:comment">
                    <title>Comment</title>
                    <type>d:text</type>
                    <mandatory>false</mandatory>
                </property>
            </properties>
        </aspect>

        <aspect name="idocs:hasCopiedFrom">
            <associations>
                <association name="idocs:copiedFrom">
                    <source>
                        <mandatory>false</mandatory>
                        <many>true</many>
                    </source>
                    <target>
                        <class>idocs:doc</class>
                        <mandatory>false</mandatory>
                        <many>true</many>
                    </target>
                </association>
            </associations>
        </aspect>

        <aspect name="idocs:hasAttachmentRkkCreatedFrom">
            <associations>
                <association name="idocs:attachmentRkkCreatedFrom">
                    <title>sam:package attachment RKK was created from</title>
                    <source>
                        <mandatory>false</mandatory>
                        <many>true</many>
                    </source>
                    <target>
                        <class>cm:content</class>
                        <mandatory>false</mandatory>
                        <many>false</many>
                    </target>
                </association>
            </associations>
        </aspect>

        <aspect name="idocs:isContractAttachment"/>

        <aspect name="idocs:hasBarcode">
            <properties>
                <property name="idocs:barcode">
                    <type>d:text</type>
                </property>
            </properties>
        </aspect>

        <aspect name="idocs:hasAttachmentState">
            <properties>
                <property name="idocs:attachmentState">
                    <type>d:text</type>
                    <default/>
                    <constraints>
                        <constraint ref="idocs:constraint:attachmentStateOptions" />
                    </constraints>
                </property>
            </properties>
        </aspect>

    </aspects>

</model>
